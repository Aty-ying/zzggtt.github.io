{"posts":[{"title":"Mysql手工注入检测和基础函数","content":"注入检测 一、Mysql基础 Mysql的逻辑架构图： 下面的内容采用如下源码进行分析： //源码（sqli-labs）: $sql=&quot;SELECT * FROM users WHERE id='$id' LIMIT 0,1&quot;; //对应的sql语句 : SELECT * FROM users WHERE id='1'' LIMIT 0,1 分析器 MySQL的分析器从输入的&quot;select&quot;这个关键字识别出来，这是一个查询语句。它也要把字符串“T”识别成“表名T”，把字符串“ID”识别成“列ID”。做完了这些识别以后，就要做“语法分析”。根据词法分析的结果，语法分析器会根据语法规则，判断你输入的这个SQL语句是否满足MySQL语法。如果你的语句不对，就会收到“You have an error in your SQL syntax”的错误提醒。 举个例子：比如下面这个语句select少打了开头的字母“s” 执行器 MySQL通过分析器知道了你要做什么，通过优化器知道了该怎么做，于是就进入了执行器阶段，开始执行语句。 Mysql 逻辑与或运算 逻辑运算符用来判断表达式的真假。如果表达式是真，结果返回 1。如果表达式是假，结果返回 0。 参考：https://www.runoob.com/mysql/mysql-operator.html 我自己的理解： AND：一假即假 OR：一真即真 自己多实践一些例子就能理解： user表结构： 二、触发mysql语法错误 检测注入 常见的通过触发语法错误来检测注入的方式（是否成对匹配）： ' False '' True &quot; False &quot;&quot; True \\ False \\ True http://127.0.0.1/sqli-labs/Less-1/?id=1' http://127.0.0.1/sqli-labs/Less-1/?id=1\\ http://127.0.0.1/sqli-labs/Less-1/?id=1&quot; 三、通过逻辑运算 检测注入 以如下SQL语句为例： SELECT * FROM users WHERE id = 1; AND 1 True AND 0 False id=3-1 返回2的数据即为True id=1*3 返回3的数据即为True 基础函数 Mysql常用系统函数 version() #MySQL版本 user() #数据库用户名 database() #数据库名 @@datadir #数据库路径 @@version_compile_os #操作系统版本 Mysql连接函数 函数具体介绍以及使用，参考：https://www.cnblogs.com/lcamry/p/5715634.html 当我们使用union注入去获取数据库相关数据时，由于union select的特性，获取一条数据时不会又太大影响，例如： SELECT * FROM users WHERE id='1' UNION SELECT 1,user(),3 但是想要获取多条数据时，例如： SELECT * FROM users WHERE id='1' UNION SELECT 1,schema_name,3 FROM information_schema.SCHEMATA 以sqli-labs靶场源码为例，通常服务端是这样写的： $sql=&quot;SELECT * FROM users WHERE id='$id' LIMIT 0,1&quot;; $result=mysqli_query($con1, $sql); 结果就是这样的： 就只能爆出LIMIT 0,1 的数据。 所以通过使用连接函数来爆破多条数据： SELECT * FROM users WHERE id='-1' UNION SELECT 1,group_concat(schema_name),3 FROM information_schema.SCHEMATA LIMIT 0,1 ","link":"https://zzggtt.github.io/post/mysql-shou-gong-zhu-ru-jian-ce-he-ji-chu-han-shu/"},{"title":"初始Webshell","content":"Webshell 1、Shell Shell是一个 命令解释器 ：用于接收使用者输入的指令，并送入内核去执行。解释使用者输入的指令。是一种为使用者提供操作界面的软件。 基本上分为两大类： 图像界面shell 应用最为广泛的 Windows Explorer （微软的windows系列操作系统），还有也包括广为人知的 Linux shell，其中linux shell 包括 X window manager (BlackBox和FluxBox），以及功能更强大的CDE、GNOME、KDE、 XFCE。 命令式shell Unix/linux 系统：bash / sh / ksh / csh / zsh Winodws系统：cmd.exe、PowerShell 2、Webshell Webshell是一种Web形式的命令解释器，以asp、jsp、php或者cgi等动态脚本语言编写一种执行系统代码的环境。通过浏览器访问网站服务器Web目录下的Webshell，输入指令，来达到管理目标网站的服务器。 以最简单的php webshell为例： &lt;?php system($_GET('command')); ?&gt; 通过GET方式comand参数来接收传递命令，然后交由system函数执行命令。 3、Webshell分类 4、Webshell管理工具 在以前菜刀没有出现的时候，我们想要获取 webshell 的时候，通常都是直接上传一个 web 木马并且直接用这个木马进行管理，由于这种大型木马的体量比较大，上传过程中容易被检测且不方便进行上传绕过测试，所以大家就想了一个办法，先上传一个体量小，功能少的小型木马然后再通过小马的简单的上传或者文件修改等单个功能进行大马的上传。小马的功能通常是围绕文件管理的功能，比较简单，如：文件上传、文件修改、新建文件等，都是围绕方便上传一个体量大的木马来做的。自从菜刀出现之后，渐渐的一句话木马成为了主流，体量小，还有一个界面版的客户端进行管理操作，极大的方便的大家对于 web 服务器的管理。 上传完大马后，直接访问对应位置即可进行相应管理： 而一句话木马则提供了一个界面版的客户端进行管理操作，极大的方便的大家对于Web服务器的管理： 常见的Webshell管理工具：https://www.cnblogs.com/xiaozi/p/12397211.html 参考：https://mp.weixin.qq.com/s/x2Tw3ukaTFDJvZ0YCuZBog ","link":"https://zzggtt.github.io/post/chu-shi-webshell/"},{"title":"《图解TCP/IP》读书笔记","content":"前言 了解TCP/IP是对渗透测试很有必要的，下面是我阅读完《图解TCP/IP》后，记录的一些重要的知识点。 （随着我的渗透测试学习，将会持续更新！！！） TCP/IP概述 1、含义 互联网在进行通信时，需要相应的网络协议，而在网络中被广泛使用的TCP/IP协议。TCP/IP协议在多数情况下指的是：利用IP进行通信时所必须用到的协议群的统称。 2、分层模型 OSI参考模型注重“通信协议必要的功能是什么”，而TCP/IP则更强调“在计算机上实现协议应该开放哪种程序” 硬件层 TCP/IP的最底层的主要作用是负责数据传递的硬件。 网卡层 网卡层也称网络接口层，可以理解为“驱动程序”。它是硬件与操作系统之间的桥梁。计算机的外设不是直接插上就能使用的，还需要“驱动程序”的支持。所以通常需要在操作系统上安装一些驱动程序软件，才能使用这些附加硬件。 互联网层 互联网层使用IP协议，IP协基于IP地址转发分发数据。 传输层 传输层的主要功能是让应用程序软件之间实现通信，它具有来个代表性的协议：TCP、UDP。 应用层 TCP/IP的应用层把OSI参考模型中的会话层、表示层、应用层的功能都集中到应用程序软件中来实现。TCP/IP应用的架构绝大数属于C/S架构。 提供服务的应用程序叫做服务端，接收服务的应用程序叫做客户端。在这种通信模式中，提供服务的程序会被预先部署到服务器主机上，等待接收任何时刻客户端发送的请求。 WWW 在WWW中，用户通过Web浏览器（客户端），就可以访问存储在Web服务器上的各种信息。Web浏览器和Web服务器之间的通信协议是HTTP（应用层协议），所传输的数据的主要格式是HTML（表示层协议）。 电子邮件 电子邮件之在网络上发送邮件，发送邮件的通信协议是SMPT（应用层协议）。起初只能发送文本格式，然而现在电子邮件由MIME协议（表示层协议）拓展后，就可以发送声音、图片等各式各样的信息。 文件传输 文件传输协议是指将保存在其他计算机硬盘上的文件传输到本地硬盘上，该过程使用的协议是FTP。 远程登陆 远程登陆指的是登录到远程的计算机上。在TCP/IP中常用TELNET和SSH两种协议。 3、通信示例 地址的唯一性 在TCP/IP或UDP/IP通信中，通常采用5个信息来识别一个通信。分别是：“源IP地址”、“目标IP地址”、“协议号”、“源端口地址”、“目标端口地址”。 基础概念 端口 在传输层中，用于识别一台计算机中正在运行的不同的应用程序。 IP地址 在网络层中，用于识别TCP/IP网络中互联的主机和路由器。 MAC地址 在数据链层路中，用于是被同一链路中不同的计算机。 端口 一台计算机中可以同时运行多个应用程序，例如Web浏览器、远程登陆用的SSH客户端等待。而传输层协议（TCP、UDP）正式利用端口号来识别不同的应用程序，并准确的将数据传输。 常见的端口对应的服务：https://www.shentoushi.top/Public/upload/images/2017-07-09/Baidu_translation_table.png IP地址 IP协议作为整个TCP/IP中至关重要的协议，主要作用是在复杂的网络环境中将数据包发送给最终的目标计算机。能够让任意两台计算机之间进行通讯。 在TCP/IP通信中，所有主机或路由器必须设定IP地址。IP地址的作用在于从连接到互联网中的所有主机中，识别出进行通信的目标地址。 组成 IP地址由“网络地址”和“主机地址”两部分组成。 网络地址代表不同的网段，而主机地址代表同一网段中的不同的主机。 分类 全局地址和私有地址 随着互联网的普及，IP地址不足的问题日趋显著，于是出现了一种技术：在每个独立的网络中，只为相应的设备分配唯一的IP地址，对于哪些没有连接尽互联网中的主机，只需要保证在整个独立的网络中地址唯一即可。 这些地址称为私有地址，范围如下： NAT技术 私有IP地址最早没有计划连接互联网，而只是用于互联网之外的独立网络。然而随着NAT技术的出现，配置私有IP的主机也能与互联网中的主机进行通信。 NAT技术是一种能够互换私有IP地址与全局IP地址的技术。 当独立网络内部有多台机器同时要与外部通讯时，仅仅转换IP地址是不够用的，此时采用包含端口号一起转换的方式（NAPT）即可解决。 MAC地址 MAC地址用于识别数据链路中互连的节点。 ","link":"https://zzggtt.github.io/post/lesslesstu-jie-tcpipgreatergreater-du-shu-bi-ji/"},{"title":"复习一下Web基础知识","content":"前言 在《图解TCP/IP》中，了解到WWW是促使互联网发展的重要动力，所以准备复习一下JavaWeb相关的基础知识。 通信协议HTTP Web客户端（浏览器）和web服务器之间主要是通过http协议来进行交互。想要快速掌握HTTP协议，推荐通过《图解HTTP》进行学习。掌握基础的请求和响应流。 Web 1、静态Web 静态Web对于每个用户来说，看到的都是相同的页面。例如：百度首页，对于每个用户来说都是一样的。 常见的静态Web资源有：html、css、js、image等。 2、动态Web 动态Web对于每个用户来说就因人而异。例如：百度的个人中心，就会从数据库中去加载不同用户的不同个人资料等数据。 Web服务器 ​ Web服务器处理来自客户端的HTTP请求，并返回HTTP响应。它擅长处理静态资源。而静态资源存储在Web目录中，Web服务器找到相应的静态资源后，响应给客户端。 ​ 但如果想要提供动态页面和动态数据，例如，需要从数据库中取出个人中心的数据，Web服务器就显得有些力不从心了。这时就需要一个辅助应用，能够生成动态页面，而且这个应用能与Web服务器通信，并且能够和后端java语言进行交互，从而从数据库存取数据。这个辅助应用就是servlet。 Servlet ​ Servlet就是sun公司开发动态web的一门技术，Sun公司在这些API中提供一个接口叫做Servlet。我们一般把实现了Servlet接口的java类也称之为Servlet。在MVC设计模式中，servlet扮演着C（控制器）的角色，当客户请求到来，进入到Servlet，Servlet调用M（业务逻辑）从数据库中存取数据 但Servlet也需要帮助。当请求到来时，必须有人加载、初始化和实例化Servlet，或者创建或分配一个新的线程处理这个请求，调用Servlet的doGet（）、doPost（）方法。并需要有人创建servlet必须的参数HTTPServletRequest和HTTPServletResponse。当请求处理结束后，有人销毁Servlet，管理着Servlet的生命周期。这个人就是Web容器也称Web应用服务器。 Web容器 ​ Servlet没有main()方法，它们受控于另一个Java应用，这个Java应用称为容器。 Tomcat就是这样一个容器，如果Web服务器（如Apache）得到一个指向某Servlet的请求（而不是其他请求，如请求一个普通的静态页面），此时Web服务器不是把这个请求交给servlet本身，而是交给部署该Servlet的容器，要由容器向Servlet提供HTTP请求和响应，而且要由容器调用Servlet的方法，如doGet()和doPost()。 用一个丑陋的图来形容就是： ","link":"https://zzggtt.github.io/post/fu-xian-yi-xia-web-ji-chu-zhi-shi/"},{"title":"关于","content":" 📝温故而知新 📒 twitter：https://twitter.com/Zer0ney1 📙 wechat：z807852704 ","link":"https://zzggtt.github.io/post/about/"}]}